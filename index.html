<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Budget and Savings Estimator</title>
  <meta name="robots" content="noindex">
  <link rel="stylesheet" href="css/style.css" media="screen" type="text/css" />
</head>

<body>
  <header><h1>Simple Budget Estimator</h1></header>

  <!-- Interest and Inflation 
Ask for advisor
Look for goals - Want to buy a house in 5 years
Medium Risk would be best.
After achieving goal - then get a little more risky.
Go after 2 - 2.5% Interest.
GIC 3 - 5 years (locked in interest)
-->
<!-- Interest and Inflation 
Ask for advisor
Look for goals - Want to buy a house in 5 years
Medium Risk would be best.
After achieving goal - then get a little more risky.
Go after 2 - 2.5% Interest.
GIC 3 - 5 years (locked in interest)
-->
<div class="navigation-container">
<form id="savings-form">
    <fieldset>
    <label for="paycheck">How much do you get paid on your paycheck?</label>
    <input name="paycheck" value="1200" id="paycheck" placeholder="How much do you get on your paycheck - ex. 2200" type="text" >
    </fieldset>

    <fieldset>
    <label for="frequency-of-pay">How often do you get paid?</label>
    <div class="pays-per-year radio-options">
      <div>
        <input name="frequency-of-pay" type="radio" value="once-month">
        <label>Once a Month</label>
      </div>
      <div>
        <input name="frequency-of-pay" type="radio" value="twice-month">
        <label>Twice a Month</label>
      </div>
      <div>
        <input name="frequency-of-pay" type="radio" checked value="two-weeks">
        <label>Every Two Weeks</label>
      </div>
    </div>
    </fieldset>

    <fieldset>
    <label for="monthly-payments">Total monthly payments - guestimates are fine.</label>    
    <input name="monthly-payments" value="1600" id="monthly-payments" placeholder="How much are your montly bills? - ex. 350" type="text" >
    </fieldset>
    
    <fieldset>
    <label for="savings">What percent of what's left over would you like to save?</label>    
    <input name="savings" id="savings" value="65" placeholder="How much would you like to save? ex. 25" type="text" >
    </fieldset>

    <fieldset>
      <label for="length-of-savings">How many years do you think you can keep saving like this?</label>    
      <input name="length-of-savings" id="length-of-savings" placeholder="ex. 10" type="text" value="10" >
    </fieldset>

    <fieldset>
      <label for="initial-savings">How much is already saved?</label>    
      <input name="initial-savings" id="initial-savings" value="0" placeholder="ex. 500" type="text" >
    </fieldset>
    
    <fieldset>
    <label for="interest">Average compound rate per year?</label>    
    <input name="interest" id="interest" placeholder="Leave blank if you're not investing." value="5" type="text" >
    </fieldset>

    <input type="button" name="submit" value="Calculate" id="submit" >
    <div style="margin-top: 1em" class="col-container">
      <input type="button" class="col-2" onclick="RememberForm.init();" value="Save Settings">
      <input type="button" class="col-2" onclick="localStorage.removeItem('investments_localstorage');" value="Clear Saved Settings">
    </div>
  </form>
</div>

<div class="container">
  <div id="results"><hr><h2>Quick preview with <button onclick="startParty();">Sample Data</button><h2></div>
  <hr>
  <div id="savings-investments-overtime-graph"></div>
  <hr>
  <div id="questions-container" class="col-container">
    <section class="question col-2">
      <h2>Understand the impact of "low interest" fees</h2>
      <p>They look small, but they add up over time.</p>
      <button data-action="fees" data-action-value="0.01">1%</button>
      <button data-action="fees" data-action-value="0.02">2%</button>
      <button data-action="fees" data-action-value="0.03">3%</button>
    </section>
    <section class="question col-2">
      <h2>Understand the difference over time.</h2>
      <p>The more time, the much larger the growth.</p>
      <button data-action="fees" data-action-value="0.01">10 years</button>
      <button data-action="fees" data-action-value="0.02">20 years</button>
      <button data-action="fees" data-action-value="0.03">30 years</button>
    </section>
  </div>
  <hr>
  <div id="stats">
    <div class="col-container">
      <section class="col-2 graph-container">
        <h2>Daily Breakdown.</h2>
        <div id="daily-breakdown-stats"></div>
        <ul>
          <li>Great job! You can treat yourself to <span class="color-remaining" id="daily-remaining">0</span> a day.</li>
          <li>You are planning on saving <span class="color-savings" id="daily-savings">0</span>.</li>
          <li>Unfortunately, this whole life thing cost you <span class="color-payments" id="daily-payments">0</span> today.</li>
          <li>But, would you look at that, it turns out you are worth <span class="color-income" id="daily-income">0</span> each day.</li>
        </ul>
      </section>
      <section class="col-2 graph-container">
        <h2>Weekly Breakdown.</h2>
        <div id="weekly-breakdown-stats"></div>
        <ul>
          <li>You should plan to spend no more than <span class="color-remaining" id="weekly-remaining">0</span> a week.</li>
          <li>Why not make regular contributions of <span class="color-savings" id="weekly-savings">0</span> to your savings?</li>
          <li>Your payments are starting to add up, you will need <span class="color-payments" id="weekly-payments">0</span> for your bills.</li>
          <li>On the bright side, you made <span class="color-income" id="weekly-income">0</span> this week.</li>
        </ul>
      </section>

      <section class="col-2 graph-container">
        <h2>Monthly Breakdown.</h2>
        <div id="monthly-breakdown-stats"></div>
        <ul>
          <li>You are spending about <span class="color-remaining" id="monthly-remaining">0</span> a month on yourself.</li>
          <li>And making big strides with your savings. Another <span class="color-savings" id="monthly-savings">0</span> added.</li>
          <li>Did you make sure to make all your payments? <span class="color-payments" id="stat-monthly-payments">0</span>(ish).</li>
          <li>You were paid <span class="color-income" id="monthly-income">0</span> this month.</li>
        </ul>
      </section>

      <section class="col-2 graph-container">
        <h2>Yearly Breakdown.</h2>
        <div id="yearly-breakdown-stats"></div>
        <ul>
          <li>Did you know you are spending around <span class="color-remaining" id="yearly-remaining">0</span> a year?</li>
          <li>If you stick to your plan you will save <span class="color-savings" id="yearly-savings">0</span> this year.</li>
          <li>All your payments added up to around <span class="color-payments" id="stat-yearly-payments">0</span>.</li>
          <li>Your take home pay this year is <span class="color-income" id="yearly-income">0</span>.</li>
        </ul>
      </section>
    </div>
  </div>
</div>

<script src='http://brandonbrule.github.io/itsa/js/itsa.js'></script>


<script src="js/highcharts.js"></script>
<script src="js/global-variables.js"></script>
<script src="js/stats-charts.js"></script>
<script src="js/index.js"></script>
<script>
var RememberForm = (function () {

  // Forms as JS Object
  var form_local_storage_object = {};
  
  // Set Local Storage Item, can be any name
  // form_id cause this object remembers forms.
  var setLocalStorageItem = function(local_storage_object){
    if (!localStorage.getItem(local_storage_object)) {
      // Put the object into storage
      localStorage.setItem('investments_localstorage', JSON.stringify(form_local_storage_object));
    }
  };
  
  var removeLocalStorageItem = function(local_storage_object){
    localStorage.removeItem(local_storage_object);
  };
  
  // Return Local Storage Item as JS Object
  var parseLocalStorageItemAsObject = function(local_storage_object){
    // Retrieve the object from storage
    var formLocalStorageObject = localStorage.getItem('investments_localstorage');
    var formLocalStorageObject = JSON.parse(formLocalStorageObject);
    return formLocalStorageObject; 
  };
  
  
  var setFormValuesFromLocalStorage = function (form_id){
    var form = document.getElementById(form_id);
    var form_inputs = form.getElementsByTagName('input');
    
    var local_storage_object = parseLocalStorageItemAsObject(form_local_storage_object);
    var form_from_local_storage = local_storage_object[form_id][0];

    

    
    // Set Input Value from Local Storage Property
    for (var i = 0, len = form_inputs.length; i < len; i++){
      
      for(key in form_from_local_storage[i]) {
        
        if(form_from_local_storage[i].hasOwnProperty(key)) {
          var value = form_from_local_storage[i][key];
          form_inputs[i].value = value;
        }
        
      }
      
    }

  };
  
  
  var setFormLocalStorageObjectWithInputs = function (form_id) {
    var form = document.getElementById(form_id);
    var form_inputs = form.getElementsByTagName('input');
    var form_input_id;
    var form_input_object;
    var form_input_array = [];
    

    // Push each form input into an object
    // form input id : form input value
    // Push that back into our local storage object.
    for (var i = 0; i < form_inputs.length; i++){
      
      if ( form_inputs[i].hasAttribute('id')  ){
        form_input_id = form_inputs[i].getAttribute('id');
      } else {
        form_input_id = form_inputs[i].getAttribute('value');
      }
      
      form_input_object = {};
      form_input_object[form_input_id] = form_inputs[i].value;
      
      form_input_array.push(form_input_object);

    }
    
    form_local_storage_object[form_id].push(form_input_array);

  };

  
  
  var init = function () {
    var forms = document.getElementsByTagName('form');
    var form_id;
    
    //removeLocalStorageItem(form_local_storage_object);
    
    for (var i = 0; i < forms.length; i++){
      var form_local_storage_array = [];
      
      // Array of forms with form id as the property name
      form_id = forms[i].getAttribute('id');
      
      // Make Objects Properties from Form Ids as arrays that will hold the inputs
      
      form_local_storage_object[form_id] = form_local_storage_array;
      
      if (localStorage.getItem(form_id) === 'null') {
        setFormValuesFromLocalStorage(form_id);
      }
    
      
      setFormLocalStorageObjectWithInputs(form_id);
    }
    
    removeLocalStorageItem(form_local_storage_object);
    setLocalStorageItem(form_id);
    
    
    var another_form_local_storage_object = parseLocalStorageItemAsObject(form_local_storage_object);

    
  };
  
  return {
    removeLocalStorageItem : removeLocalStorageItem,
    setFormValuesFromLocalStorage : setFormValuesFromLocalStorage,
    init: init
  };

})();


// Set Form Values from Local Storage Object
var setFormValues = function(){
  var my_forms = document.getElementsByTagName('form');
  for (var j = 0; j < my_forms.length; j++){  
    var my_form_id = my_forms[j].getAttribute('id');
    RememberForm.setFormValuesFromLocalStorage(my_form_id);
  }
}

setFormValues();




</script>



</body>

</html>